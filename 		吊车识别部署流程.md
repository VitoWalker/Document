# 		部署流程

- 拷贝 /usr/local/hhit 文件夹到指定位置

- 拷贝xxd1.tar.gz 至 家目录

  ​


- 安装cuda、cudnn 

  **路径：/usr/local/cuda-8.0**

  ```shell
  #安装cuda8,按默认选项安装即可
  sudo ./cuda_8.0.61_375.26_linux.run
  #安装cudnn
  sudo cp cuda/include/* /usr/local/cuda-8.0/include/
  sudo cp cuda/lib64/* /usr/local/cuda-8.0/lib64/
  ```


- 安装opencv3.1

  **路径：/usr/local/opencv-3.1.0**

  ```shell
  #编译环境安装：
  sudo apt-get install build-essential
  #必需包安装：
  sudo apt-get install cmake git libgtk2.0-dev pkg-config libavcodec-dev libavformat-dev libswscale-dev
  #可选包安装：
  sudo apt-get install python-dev python-numpy libtbb2 libtbb-dev libjpeg-dev libpng-dev libtiff-dev libjasper-dev libdc1394-22-dev
  #编译
  #进入opencv源码目录
  mkdir build
  cd build
  cmake  -D CMAKE_INSTALL_PREFIX=/usr/local/opencv-3.1.0  -D BUILD_TIFF=ON -D WITH_FFMPEG=ON  ..
  make
  sudo make install
  ```

------

## 徐博士那边：

- 首先运行下列命令

  ```shell
  sudo apt-get update
  sudo apt-get upgrade
  sudo apt-get install -y build-essential cmake git pkg-config
  sudo apt-get install -y libprotobuf-dev libleveldb-dev libsnappy-dev libhdf5-serial-dev protobuf-compiler
  sudo apt-get install -y libatlas-base-dev 
  sudo apt-get install -y --no-install-recommends libboost-all-dev
  sudo apt-get install -y libgflags-dev libgoogle-glog-dev liblmdb-dev
  # 安装 python相关内容
  sudo apt-get install -y python-pip
  sudo apt-get install -y python-dev
  sudo apt-get install -y python-numpy python-scipy
  # 安装OpenCV2.4
  sudo apt-get install -y libopencv-dev
  ```


- 编译caffe

  **路径：/usr/local/**

  ```Shell
  cd caffe-fast-rcnn/python/
  pip install -r requirements.txt
  cd caffe-fast-rcnn/
  make all -j4
  ```

  ​

------

## 晓鹏那边：

```shell
cd shandong/carDetector/
# 编辑CMakeList.txt
cd shandong/
# 编辑CMakeList.txt
```



**<u>遇到的问题</u>**

<!--主要是因为caffe编译的时候默认的protobuf的版本是2.6.1，而Python通过pip install protobuf 安装的版本是最新版本3.4.0！而在caffe环境中我们必须统一ProtoBuffer的版本才可以避免各种不易排查的错误！！ 为此，我们先卸载Python的版本ProtoBuffer，再重新安装2.6.1的版本就完美的解决了这个问题。--> 

解决办法：

`pip uninstall protobuf`

然后再重新安装：

`pip install protobuf==2.6.1`

------

## 沈刚那边：

